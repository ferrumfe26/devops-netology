<h1>Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"</h1>




1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

         C:\Users\user>ipconfig
         Настройка протокола IP для Windows
         Адаптер Ethernet Ethernet 5:
         DNS-суффикс подключения . . . . . :
         Локальный IPv6-адрес канала . . . : fe80::1d79:12c7:ab3:bf0b%38
         IPv4-адрес. . . . . . . . . . . . : 192.168.213.33
         Маска подсети . . . . . . . . . . : 255.255.255.0
         Основной шлюз. . . . . . . . . : 192.168.213.1

         vagrant@vagrant:~$ sudo ifconfig
         dummy0: flags=195<UP,BROADCAST,RUNNING,NOARP>  mtu 1500
         inet 10.0.3.1  netmask 255.255.255.0  broadcast 10.0.3.255
         inet6 fe80::8c82:9fff:fe2a:b7f0  prefixlen 64  scopeid 0x20<link>
         ether 8e:82:9f:2a:b7:f0  txqueuelen 1000  (Ethernet)
         RX packets 0  bytes 0 (0.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 13  bytes 910 (910.0 B)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

         eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
         inet6 fe80::a00:27ff:fe73:60cf  prefixlen 64  scopeid 0x20<link>
         ether 08:00:27:73:60:cf  txqueuelen 1000  (Ethernet)
         RX packets 4947  bytes 605996 (605.9 KB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 3340  bytes 332578 (332.5 KB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

         lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
         inet 127.0.0.1  netmask 255.0.0.0
         inet6 ::1  prefixlen 128  scopeid 0x10<host>
         loop  txqueuelen 1000  (Local Loopback)
         RX packets 22  bytes 2100 (2.1 KB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 22  bytes 2100 (2.1 KB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

         Link Layer Discovery Protocol (LLDP) — протокол канального уровня, позволяющий сетевому оборудованию оповещать оборудование, работающее в локальной сети
         Cisco Discovery Protocol (CDP) — проприетарный протокол Cisco, который позволяет сетевым устройствам анонсировать в сеть информацию о себе и о своих возможностях, а также собирать эту информацию о соседних устройствах. 


       **vagrant@vagrant:~$ lldpctl**
      -------------------------------------------------------------------------------
      LLDP neighbors:
      -------------------------------------------------------------------------------     

      в данном случае, нет соседей в виртуальной среде.

      **vagrant@vagrant:~$ lldpcli sh int**
       -------------------------------------------------------------------------------
       LLDP interfaces:
       -------------------------------------------------------------------------------
       Interface:    eth0, via: unknown, Time: 0 day, 00:04:45
       Chassis:
       ChassisID:    mac 08:00:27:73:60:cf
       SysName:      vagrant.vm
       SysDescr:     Ubuntu 20.04.2 LTS Linux 5.4.0-80-generic #90-Ubuntu SMP Fri Jul 9 22:49:44 UTC 2021 x86_64
       MgmtIP:       10.0.2.15
       MgmtIP:       fe80::a00:27ff:fe73:60cf
       Capability:   Bridge, off
       Capability:   Router, off
       Capability:   Wlan, off
       Capability:   Station, on
       Port:
       PortID:       mac 08:00:27:73:60:cf
       PortDescr:    eth0
       TTL:          120
       -------------------------------------------------------------------------------

         lldpcli sh с разными значениями отражает различную статистьику(описано в man)

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

          VLAN - Virtual Local Area Network
          пакет vlan в линукс

         modprobe 8021q
         vim /etc/sysconfig/network-scripts/ifcfg-eth0.100
         # Конфигурация VLAN с ID – 100 для интерфейса eth0 #
         DEVICE=eth0.100
         BOOTPROTO=none
         ONBOOT=yes
         IPADDR=192.168.1.5
         NETMASK=255.255.255.0
         USERCTL=no
         NETWORK=192.168.1.0
         VLAN=yes

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

   Объеденение двух сетевых интерфейсов в один в терминологии Windows называется teaming, а в терминологии Linux — bonding. Этот режим может использоваться для повышения отказоустойчивости и/или пропускной способности сетевого подключения.

    Linux поддерживает несколько режимов агрегации интерфейсов:

    0 (balance-rr) — round-robin распределение пакетов между интерфейсами. Обеспечивает отказоустойчивость и повышение пропускной способности.
    1 (active-backup) — в каждый момент времени работает только один интерфейс, в случае его выхода из строя, mac-адрес назначается второму интерфейсу и трафик переключается на него.
    2 (balance-xor) — обеспечивает балансировку между интерфейсами на основании MAC-адресов отправителя и получателя.
    3 (broadcast) — отправляет пакеты через все интерфейсы одновременно, обеспечивает отказоустойчивость.
    4 (802.3ad) — обеспечивает агрегацию на основании протокола 802.3ad.
    5 (balance-tlb) — в этом режиме входящий трафик приходит только на один «активный» интерфейс, исходящий же распределяется по всем интерфейсам.
    6 (balance-alb) — балансирует исходящий трафик как tlb, а так же входящий IPv4 трафик используя ARP.
   
          sudo nano /etc/network/interfaces
          # The primary network interface
         auto bond0
         iface bond0 inet static
         address 192.168.1.150
         netmask 255.255.255.0    
         gateway 192.168.1.1
         dns-nameservers 192.168.1.1 8.8.8.8
         dns-search domain.local
         slaves eth0 eth1
         bond_mode 0
         bond-miimon 100
         bond_downdelay 200
         bound_updelay 200
         
        sudo ifdown eth0 && ifdown eth1 && ifup bond0

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

            /29 - это маска 255.255.255.248, те свободные 3 бита... последние 111(4 2 1), короче получается всего 8 значений... 8 ип адресов из них 6 хостов... 
            Из /24 подсети можно получить 32 /29 подсети, тк это 5 бит под сети, остальные под хосты будет сети начинаться 192.168.1.0/29, 192.168.0.8/29, 16 и тд до 192.168.0.248/29
            привел пример из 192.. сети, так как сначала привел, а потом дальше прочитал, для сети 10.10.10.0 все тоже самое.. 

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

            Есть 4ая частаня сеть  100.64.0.0/10           
            Я бы поделил с маской /24 сети, чтобы проще считать было, такого вида - 100.64.0.0/24, 100.64.1.0/24
            Но если очень хочется высчитывать сидететь, то ограничеться можно маской /26 - это 64 -2 хоста в сети. 
            Получится 4 сети - 100.64.0.0/26 100.64.64.0/26, 100.64.128.0/26Б 100.64.192.0/26

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
 
       C:\WINDOWS\system32>arp -a
       Интерфейс: 192.168.213.33 --- 0x8
         адрес в Интернете      Физический адрес      Тип
         192.168.213.1         50-ff-20-12-0f-64     динамический
         192.168.213.5         38-00-25-56-fb-1c     динамический
         192.168.213.23        6c-5a-b5-1c-07-16     динамический
         192.168.213.29        c4-85-08-ce-98-ac     динамический
         192.168.213.70        00-11-32-13-00-c2     динамический
         192.168.213.88        9c-14-63-05-45-eb     динамический
         192.168.213.255       ff-ff-ff-ff-ff-ff     статический
         224.0.0.2             01-00-5e-00-00-02     статический
         224.0.0.22            01-00-5e-00-00-16     статический
         224.0.0.251           01-00-5e-00-00-fb     статический
         224.0.0.252           01-00-5e-00-00-fc     статический
         239.255.255.250       01-00-5e-7f-ff-fa     статический
         255.255.255.255       ff-ff-ff-ff-ff-ff     статический
    
       Интерфейс: 192.168.172.1 --- 0x1a
         адрес в Интернете      Физический адрес      Тип
         192.168.172.255       ff-ff-ff-ff-ff-ff     статический
         224.0.0.2             01-00-5e-00-00-02     статический
         224.0.0.22            01-00-5e-00-00-16     статический
         224.0.0.251           01-00-5e-00-00-fb     статический
         224.0.0.252           01-00-5e-00-00-fc     статический
         239.255.255.250       01-00-5e-7f-ff-fa     статический


    netsh interface ip delete arpcache - полностью очистить кэш
    arp -d 192.168.213.70 Для конкретного ип.

  Для Линукс:
        vagrant@vagrant:~$ arp

           Address                  HWtype  HWaddress           Flags Mask            Iface
           _gateway                 ether   52:54:00:12:35:02   C                     eth0
           10.0.2.3                 ether   52:54:00:12:35:03   C                     eth0
       
       vagrant@vagrant:~$ sudo arp -d 10.0.2.3
               
       vagrant@vagrant:~$ ip neigh flush all